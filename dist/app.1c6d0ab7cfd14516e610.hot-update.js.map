{"version":3,"sources":["webpack://yodda/./src/js/BarChart.js"],"names":["BarChart","opts","self","el","d3","select","city","data","margin","top","right","bottom","left","width","parseInt","style","height","draw","window","addEventListener","resize","html","svg","append","attr","g","x","scaleLinear","range","y","scaleBand","rangeRound","padding","domain","max","d","amount","map","contribution","selectAll","enter","bandwidth","call","axisBottom","ticks","axisLeft","format","duration"],"mappings":"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","file":"app.1c6d0ab7cfd14516e610.hot-update.js","sourcesContent":["export default class BarChart {\n\n  constructor(opts) {\n    const self = this;\n    self.el = d3.select(opts.el);\n    self.city = opts.city;\n    self.data = opts.data[self.city];\n    this.margin = {\n      top: 20,\n      right: 20,\n      bottom: 20,\n      left: 5\n    };\n\n    this.width = parseInt(this.el.style('width')) - this.margin.left - this.margin.right;\n    this.height = parseInt(this.el.style('width')) * 0.4 - this.margin.top - this.margin.bottom;\n\n    this.draw();\n\n    window.addEventListener(\"resize\", () => {\n      this.resize()\n    })\n  }\n  draw() {\n    // moves the 'group' element to the top left margin\n    this.el.html(\"\");\n    this.svg = this.el.append(\"svg\")\n      .attr(\"width\", this.width + this.margin.left + this.margin.right)\n      .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\n      .attr(\"class\", \"bar-svg\");\n\n    this.g = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\n    this.x = d3.scaleLinear().range([this.width, 0]);\n    this.y = d3.scaleBand().rangeRound([0, this.height]).padding(0.1);\n\n\n    // Scale the range of the data\n    this.x.domain([0, d3.max(this.data, d => d.amount)]);\n    this.y.domain(this.data.map(d => d.contribution));\n\n    this.g.selectAll(\"rect\")\n      .data(this.data)\n      .enter().append(\"rect\")\n      .attr(\"x\", d => this.x(d.amount))\n      .attr(\"y\", d => this.y(d.contribution))\n      .attr(\"height\", this.y.bandwidth()/2)\n      // .attr(\"height\", this.y.bandwidth())\n      .attr(\"width\", d => this.width - this.x(d.amount))\n      .attr(\"class\", \"rect\")\n      .style(\"opacity\", 0.9);\n\n    this.g.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + this.height + \")\")\n      .call(d3.axisBottom(this.x).ticks(5));\n\n    this.g.append(\"g\")\n      .attr(\"class\", \"y axis\")\n      .attr(\"transform\", \"translate(0,0)\")\n      .call(d3.axisLeft(this.y));\n\n    this.g.select('.y.axis')\n      .selectAll('text')\n      .attr('x', 10)\n\n\n  }\n  numberFormat(d) {\n    return d3.format(',')(d);\n  }\n  enter(duration = 300) {\n\n  }\n  exit() {\n\n  }\n  resize() {\n    this.width = parseInt(this.el.style('width')) - this.margin.left - this.margin.right;\n    this.height = parseInt(this.el.style('width')) * 0.6 - this.margin.top - this.margin.bottom;\n\n    this.draw();\n\n  }\n}\n"],"sourceRoot":""}